- 钱相关记录
	- c:#2196f3|总体说明
		- c:#389e0d|未到期|d:20.3.28|ref:rocketmq集群
		- c:#fa8c16|快到期|ref:ttt
		- c:#cf1322|已过期|ref:2
	- 借给轩
		- 19.9.2借出 2w
		- 19.12.30借出 5w
	- ss
		- 下层邮局 2w 无密存单|d:20.2.25
		- 下层sh邮局 11w|m:198436|d:20/4/10
		- 邮局 7w|m:198436|d:20-6-17
		- 邮局 23w|m:198436|d:20-12.30
		- 邮局理财 3w+分红|d:21.7.29
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
	- 未到期|d:20.3.28
		
***
# ref:2
aaa

```css
/* 说明 */
@font-face {
    font-family: Chunkfive; src: url('Chunkfive.otf');
}

body, .usertext {
    color: #F0F0F0; background: #600;
    font-family: Chunkfive, sans;
    --heading-1: 30px/32px Helvetica, sans-serif;
}

@import url(print.css);
@media print {
    a[href^=http]::after {
        content: attr(href)
    }
}
```
aa




# ref:ttt
#### dfsafs
- 第一
- 第二

|aa|bb|cc|
|-|-|-|
|aa|dfasb|ddsaad|


行内 `aaad` dfsa;

a

```css
/* 说明 */
@font-face {
    font-family: Chunkfive; src: url('Chunkfive.otf');
}

body, .usertext {
    color: #F0F0F0; background: #600;
    font-family: Chunkfive, sans;
    --heading-1: 30px/32px Helvetica, sans-serif;
}

@import url(print.css);
@media print {
    a[href^=http]::after {
        content: attr(href)
    }
}
```


```sh
cd /opt/a/b/c
./run.sh
```



# ref:rocketmq集群
![haha.jpg](./imgs/haha.jpg)


www.baidu.com

### 一、镜像相关
- 准备工作：修改虚拟机参数中的内存占用（RocketMQ默认内存占用很大）
	- %ROCKETMQ_HOME%/bin/runserver.sh
	- %ROCKETMQ_HOME%/bin/runbroker.sh

- name server dockerfile：其中预留配置文件位置，运行时挂载进去

```dockerfile
FROM ubuntu
WORKDIR /opt
ADD alijdk ./alijdk
ADD rocketmq-4.6.1 ./rocketmq-4.6.1
ENV JAVA_HOME /opt/alijdk
ENV ROCKETMQ_HOME /opt/rocketmq-4.6.1
ENTRYPOINT ["/bin/bash", "-c", "${ROCKETMQ_HOME}/bin/mqnamesrv -c /opt/namesrv.properties"]
```
aaaa

- name server 构建脚本

```bat
docker build -t gigi/rocket-namesrv -f ./dockerfile .
```

- broker dockerfile：其中预留配置文件位置，运行时挂载进去

```dockerfile
FROM ubuntu
WORKDIR /opt
ADD alijdk ./alijdk
ADD rocketmq-4.6.1 ./rocketmq-4.6.1
ENV JAVA_HOME /opt/alijdk
ENV ROCKETMQ_HOME /opt/rocketmq-4.6.1
ENTRYPOINT ["/bin/bash", "-c", "${ROCKETMQ_HOME}/bin/mqbroker -c /opt/broker.properties"]
```

- broker 构建脚本

```sh
docker build -t gigi/rocket-broker -f ./dockerfile .
```


### 二、配置文件
- name server：多个时配置方式相似，修改端口号即可

```properties
listenPort=19876
```

- broker master
	- 相同名称的broker会组合成broker-set
	- master身份的brokerId必须是0，slave为1以上的值

```properties
listenPort=10950
haListenPort=10951
autoCreateTopicEnable=true
namesrvAddr=192.168.1.156:19876;192.168.1.156:19877
brokerIP1=192.168.1.156
brokerIP2=192.168.1.156
brokerClusterName=DefaultCluster
brokerName=broker-a
brokerId=0
deleteWhen=04
fileReservedTime=48
brokerRole=ASYNC_MASTER
flushDiskType=ASYNC_FLUSH
```

- broker slave

```properties
listenPort=10960
haListenPort=10961
autoCreateTopicEnable=true
namesrvAddr=192.168.1.156:19876;192.168.1.156:19877
brokerIP1=192.168.1.156
brokerIP2=192.168.1.156
brokerClusterName=DefaultCluster
brokerName=broker-a
brokerId=1
deleteWhen=04
fileReservedTime=48
brokerRole=SLAVE
flushDiskType=ASYNC_FLUSH

```

> 多个broker的端口不能连续，比如一个broker设置了10950、10951，另一个就不能设置为10952、10953，否则会出现端口已占用的问题。  
应该是broker内部还用了几个指定端口附近的端口，所以设置时尽量拉开点距离，比如10960、10961这样。



### 三、docker运行脚本

- name server：要挂载配置文件

```sh
docker run -d --restart=always --net=host -v /opt/rocker_conf/namesrv1.properties:/opt/namesrv.properties --name rocket-namesrv1  gigi/rocket-namesrv
docker run -d --restart=always --net=host -v /opt/rocker_conf/namesrv2.properties:/opt/namesrv.properties --name rocket-namesrv2  gigi/rocket-namesrv
```

- broker两主两从：要挂载配置文件

```sh
docker run -d --restart=always --net=host -v /opt/rocker_conf/broker-a.properties:/opt/broker.properties --name rocket-broker-a  gigi/rocket-broker
docker run -d --restart=always --net=host -v /opt/rocker_conf/broker-a-s.properties:/opt/broker.properties --name rocket-broker-a-s  gigi/rocket-broker
docker run -d --restart=always --net=host -v /opt/rocker_conf/broker-b.properties:/opt/broker.properties --name rocket-broker-b  gigi/rocket-broker
docker run -d --restart=always --net=host -v /opt/rocker_conf/broker-b-s.properties:/opt/broker.properties --name rocket-broker-b-s  gigi/rocket-broker
```

- 管理界面

```sh
docker run -d --restart=always -p 19091:8080 --name rocket-console \
-e "JAVA_OPTS=-Drocketmq.namesrv.addr=192.168.1.156:19876;192.168.1.156:19877 -Dcom.rocketmq.sendMessageWithVIPChannel=false" \
-t styletang/rocketmq-console-ng
```